import{a as g,b as d,d as T,e as b,g as C,h as w,k as S}from"./chunk-FWSOYEN6.mjs";import{a as I}from"./chunk-53UNV6UP.mjs";import{c as f,m as s}from"./chunk-HWTX3HVX.mjs";import{a as P}from"./chunk-6XMAPYSX.mjs";import{a as l}from"./chunk-E36XGHUE.mjs";import{b as p}from"./chunk-JPG25VX2.mjs";import{b as m}from"./chunk-6TIQD57I.mjs";import{a as r}from"./chunk-VZJ62XF7.mjs";import{b as y}from"./chunk-BKWJ4G7T.mjs";async function h(t){let a=await D(t);return G(t,a)}async function D(t){let{aptosConfig:a,data:n}=t,e,o;return"bytecode"in n?o=await g(n):"multisigAddress"in n?n.abi?o=d({abi:n.abi,...n}):(e={aptosConfig:a,multisigAddress:n.multisigAddress,function:n.function,functionArguments:n.functionArguments,typeArguments:n.typeArguments},o=await g(e)):n.abi?o=d({abi:n.abi,...n}):(e={aptosConfig:a,function:n.function,functionArguments:n.functionArguments,typeArguments:n.typeArguments},o=await g(e)),o}async function G(t,a){let{aptosConfig:n,sender:e,options:o}=t,i;if(U(t)&&(i=p.ZERO.toString()),_(t)){let{secondarySignerAddresses:c}=t;return T({aptosConfig:n,sender:e,payload:a,options:o,secondarySignerAddresses:c,feePayerAddress:i})}return T({aptosConfig:n,sender:e,payload:a,options:o,feePayerAddress:i})}function U(t){return t.withFeePayer===!0}function _(t){return"secondarySignerAddresses"in t}function Y(t){let{transaction:a}=t;return S(a)}function K(t){return C({...t})}async function $(t){let{aptosConfig:a,transaction:n,signerPublicKey:e,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:c}=t,u=b({transaction:n,signerPublicKey:e,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:c}),{data:A}=await m({aptosConfig:a,body:u,path:"transactions/simulate",params:{estimate_gas_unit_price:t.options?.estimateGasUnitPrice??!1,estimate_max_gas_amount:t.options?.estimateMaxGasAmount??!1,estimate_prioritized_gas_unit_price:t.options?.estimatePrioritizedGasUnitPrice??!1},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return A}async function B(t){let{aptosConfig:a}=t,n=w({...t}),{data:e}=await m({aptosConfig:a,body:n,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return e}async function M(t){let{aptosConfig:a,signer:n,transaction:e}=t,o=K({signer:n,transaction:e});return B({aptosConfig:a,transaction:e,senderAuthenticator:o})}var v={typeParameters:[],parameters:[s.u8(),new s(s.u8())]};async function nn(t){let{aptosConfig:a,account:n,metadataBytes:e,moduleBytecode:o,options:i}=t,c=o.map(u=>r.U8(u));return h({aptosConfig:a,sender:p.from(n),data:{function:"0x1::code::publish_package_txn",functionArguments:[r.U8(e),new r(c)],abi:v},options:i})}var N={typeParameters:[],parameters:[new f,s.u8(),new f,s.u8(),s.u8(),s.u8()]};async function tn(t){let{aptosConfig:a,fromAccount:n,toNewPrivateKey:e}=t,o=await P({aptosConfig:a,accountAddress:n.accountAddress}),i=l.fromPrivateKey({privateKey:e,legacy:!0}),u=new I({sequenceNumber:BigInt(o.sequence_number),originator:n.accountAddress,currentAuthKey:p.from(o.authentication_key),newPublicKey:i.publicKey}).bcsToBytes(),A=n.sign(u),R=i.sign(u),x=await h({aptosConfig:a,sender:n.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new y(n.signingScheme.valueOf()),r.U8(n.publicKey.toUint8Array()),new y(i.signingScheme.valueOf()),r.U8(i.publicKey.toUint8Array()),r.U8(A.toUint8Array()),r.U8(R.toUint8Array())],abi:N}});return M({aptosConfig:a,signer:n,transaction:x})}export{h as a,D as b,G as c,Y as d,K as e,$ as f,B as g,M as h,nn as i,tn as j};
//# sourceMappingURL=chunk-XC72DIJB.mjs.map